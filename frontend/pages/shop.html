<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop — Hotcraft</title>

  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/pages/shop.css">

  <script src="../js/config.js"></script>
  <script src="../js/cart-utils.js"></script>
  <script src="../js/shop.js" defer></script>
</head>

<body>
  <div class="container">

    <nav class="navbar shop-navbar">
      <div class="brand">
        <span class="brand-mark">▣</span>
        <span class="brand-name">HOTCRAFT</span>
      </div>

      <div class="nav-links">
        <a href="shop.html" class="nav-item">Shop</a>
        <a href="about.html" class="nav-item">About</a>
        <a href="custom.html" class="nav-item">Custom</a>

        <a href="cart.html" class="cart-link">
          <svg class="cart-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M6 6h15l-1.5 9h-12z" stroke="currentColor" fill="none" stroke-width="2"></path>
            <circle cx="9" cy="21" r="1.5"></circle>
            <circle cx="18" cy="21" r="1.5"></circle>
          </svg>
          <span class="cart-text">Cart</span>
          <span class="cart-badge" id="cartCount">0</span>
        </a>
      </div>
    </nav>
    
    <section class="shop-banner"></section>

    <section class="shop-wrapper">
      <div class="product-grid" id="productGrid"></div>
    </section>

  </div>

  <script>
    /**
     * PRESERVED FEATURES + SCROLL ANIMATION LOGIC
     */
    document.addEventListener('DOMContentLoaded', () => {
        // 1. Navbar Scroll Interaction
        const navbar = document.querySelector('.shop-navbar');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 80) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // 2. Intersection Observer for Scroll Reveal
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('reveal');
                    revealObserver.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        });

        // 3. Check for products every 100ms (Ensures we don't miss dynamic cards)
        const checkProductsExist = setInterval(() => {
            const cards = document.querySelectorAll('.product-card');
            if (cards.length > 0) {
                cards.forEach(card => revealObserver.observe(card));
                clearInterval(checkProductsExist);
            }
        }, 100);
    });
  </script>
</body>
</html>